<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>testisquitcc</title>

  <link rel="stylesheet" href="header_styles.css">
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="favicon.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="–ù–∞–∑–≤–∞–î–æ–¥–∞—Ç–∫—É">
  <link rel="manifest" href="manifest.json">

 <style>
    /* –°—É—á–∞—Å–Ω–∏–π —Å—Ç–∏–ª—å –∑–∞–≤–¥–∞–Ω–Ω—è */
.task {
  background: linear-gradient(to right, #ffffff, #f9f9f9);
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
  padding: 18px 20px;
  max-width: 520px;
  margin: 15px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: 'Inter', system-ui, sans-serif;
  transition: transform 0.2s ease, box-shadow 0.3s ease;
}

.task:hover {
  transform: scale(1.01);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
}

.task.completed, .task.archived {
  background: linear-gradient(to right, #e0f8e0, #d0f0d0);
  opacity: 0.95;
}

.task span {
  font-size: 15px;
  line-height: 1.4;
}

.task .title {
  font-size: 18px;
  font-weight: 600;
  color: #333;
}

.task .criteria {
  font-style: italic;
  color: #666;
}

.task-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 8px;
}

.task-actions button {
  padding: 6px 12px;
  font-size: 14px;
  border-radius: 6px;
  cursor: pointer;
  border: none;
  transition: background-color 0.2s;
}

.task-actions button:hover {
  opacity: 0.85;
}

.task-actions .complete-btn {
  background-color: #4caf50;
  color: white;
}

.task-actions .delete-btn {
  background-color: #f44336;
  color: white;
}

#task-form {
  max-width: 520px;
  margin: 20px auto;
  background: #fff8dc;
  padding: 18px 20px;
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
  display: none;
  flex-direction: column;
  gap: 10px;
}

#task-form input,
#task-form textarea {
  width: 100%;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 15px;
  box-sizing: border-box;
  background: #fff;
}

#task-form textarea {
  resize: none;
}

#task-form button {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  font-size: 15px;
  cursor: pointer;
}

#cancel-btn {
  background-color: #ddd;
  color: #333;
}

#save-task-btn {
  background-color: #2196f3;
  color: white;
}

#add-task-btn {
  display: block;
  margin: 20px auto 10px;
  padding: 10px 18px;
  background-color: #673ab7;
  color: white;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
}

#add-task-btn:hover {
  background-color: #5e35b1;
}

#toggle-archive-btn {
  cursor: pointer;
  user-select: none;
  margin: 30px auto 10px;
  text-align: center;
  color: #444;
  font-size: 18px;
}

.task-archive {
  width: 100%;
  max-width: 520px;
  display: none;
  opacity: 0;
  margin: 0 auto 40px;
  transition: opacity 0.3s ease;
}

.task-archive.visible {
  display: block;
  opacity: 1;
}

  </style>
</head>
<body>
    <div class="nav-bar">
    <button onclick="location.href='index.html'"><div class="icon">‚úçÔ∏è</div><div class="label">–ó–∞–ø–∏—Å–∏</div></button>
    <button onclick="location.href='task.html'"><div class="icon">üìú</div><div class="label">–¶—ñ–ª—ñ</div></button>
    <button onclick="location.href='habits.html'"><div class="icon">üìÖ</div><div class="label">–ó–≤–∏—á–∫–∏</div></button>
    <button onclick="location.href='history.html'"><div class="icon">üìñ</div><div class="label">–Ü—Å—Ç–æ—Ä—ñ—è</div></button>
  </div>
  <button id="add-task-btn" style="margin-bottom: 20px;">–î–æ–¥–∞—Ç–∏</button>

  <!-- –§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è -->
  <form id="task-form">
    <input type="text" id="title-input" placeholder="–ù–∞–¥–∞–π—Ç–µ –Ω–∞–∑–≤—É –∑–∞–≤–¥–∞–Ω–Ω—é" maxlength="30" required />
    <input type="text" id="criteria-input" placeholder="–ö–æ–ª–∏ –≤–≤–∞–∂–∞—Ç–∏–º–µ—Ç—å—Å—è –≤–∏–∫–æ–Ω–∞–Ω–∏–º?" />
    <textarea id="description-input" placeholder="–û–ø–∏—à—ñ—Ç—å –π–æ–≥–æ" rows="3" style="resize:none"></textarea>
    <div style="display:flex; gap:10px; justify-content:flex-end;">
      <button type="button" id="cancel-btn">–í—ñ–¥–º—ñ–Ω–∏—Ç–∏</button>
      <button type="submit" id="save-task-btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è</button>
    </div>
  </form>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å -->
  <div id="task-container"></div>

  <!-- –ö–Ω–æ–ø–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É -->
  <h1 id="toggle-archive-btn" style="display:none;">–í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –∞—Ä—Ö—ñ–≤</h1>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞—Ä—Ö—ñ–≤—É -->
  <div class="task-archive" id="archive-container"></div>

<script>
const STORAGE_KEY = 'taskListV3';

const addBtn = document.getElementById('add-task-btn');
const taskForm = document.getElementById('task-form');
const titleInput = document.getElementById('title-input');
const criteriaInput = document.getElementById('criteria-input');
const descriptionInput = document.getElementById('description-input');
const cancelBtn = document.getElementById('cancel-btn');
const saveTaskBtn = document.getElementById('save-task-btn');

const taskContainer = document.getElementById('task-container');
const archiveContainer = document.getElementById('archive-container');
const toggleArchiveBtn = document.getElementById('toggle-archive-btn');

// –ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ–æ—Ä–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
addBtn.onclick = () => {
  taskForm.style.display = 'flex';
  addBtn.disabled = true;
  titleInput.focus();
};

// –°–∫–∞—Å—É–≤–∞—Ç–∏
cancelBtn.onclick = () => resetForm();

function resetForm() {
  taskForm.style.display = 'none';
  addBtn.disabled = false;
  titleInput.value = '';
  criteriaInput.value = '';
  descriptionInput.value = '';
}

// –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è (–±–µ–∑ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è)
function createTask(data, isArchived) {
  const task = document.createElement('div');
  task.className = 'task';
  if (isArchived) task.classList.add('completed', 'archived');

  const title = document.createElement('span');
  title.className = 'title';
  title.textContent = data.title || '';

  const criteria = document.createElement('span');
  criteria.className = 'criteria';
  criteria.textContent = data.criteria || '';

  const description = document.createElement('span');
  description.className = 'description';
  description.textContent = data.description || '';

  const actions = document.createElement('div');
  actions.className = 'task-actions';

  if (isArchived) {
    const doneLabel = document.createElement('span');
    doneLabel.textContent = '–í–∏–∫–æ–Ω–∞–Ω–æ';
    doneLabel.style.color = 'green';
    doneLabel.style.fontWeight = '600';

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-btn';
    deleteBtn.textContent = '‚ùå';
    deleteBtn.onclick = () => {
      task.remove();
      saveTasks();
      updateArchiveButton();
    };

    actions.append(doneLabel, deleteBtn);
    archiveContainer.appendChild(task);
  } else {
    const completeBtn = document.createElement('button');
    completeBtn.className = 'complete-btn';
    completeBtn.textContent = '–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–∏–º';
    completeBtn.onclick = () => {
      task.classList.add('completed', 'archived');
      taskContainer.removeChild(task);
      archiveContainer.appendChild(task);
      saveTasks();
      updateArchiveButton();
    };

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-btn';
    deleteBtn.textContent = '‚ùå';
    deleteBtn.onclick = () => {
      task.remove();
      saveTasks();
      updateArchiveButton();
    };

    actions.append(completeBtn, deleteBtn);
    taskContainer.appendChild(task);
  }

  task.append(title, criteria, description, actions);
}

// –ó–±–µ—Ä–µ–≥—Ç–∏ –≤ localStorage
function saveTasks() {
  const tasks = [];
  const archived = [];

  document.querySelectorAll('.task').forEach(task => {
    const data = {
      title: task.querySelector('.title').textContent,
      criteria: task.querySelector('.criteria').textContent,
      description: task.querySelector('.description').textContent,
      completed: task.classList.contains('completed'),
      archived: task.classList.contains('archived')
    };

    if (data.archived) archived.push(data);
    else tasks.push(data);
  });

  localStorage.setItem(STORAGE_KEY, JSON.stringify({ tasks, archived }));
}

// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ localStorage
function loadTasks() {
  const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{"tasks":[],"archived":[]}');
  taskContainer.innerHTML = '';
  archiveContainer.innerHTML = '';
  saved.tasks.forEach(data => createTask(data, false));
  saved.archived.forEach(data => createTask(data, true));
  updateArchiveButton();
}

// –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ä–º–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
taskForm.onsubmit = (e) => {
  e.preventDefault();
  if (!titleInput.value.trim()) {
    alert('–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∑–∞–≤–¥–∞–Ω–Ω—è');
    titleInput.focus();
    return;
  }

  createTask({
    title: titleInput.value.trim(),
    criteria: criteriaInput.value.trim(),
    description: descriptionInput.value.trim()
  }, false);

  saveTasks();
  resetForm();
};

function updateArchiveButton() {
  toggleArchiveBtn.style.display = archiveContainer.children.length > 0 ? 'block' : 'none';
  if (archiveContainer.children.length === 0) {
    archiveContainer.classList.remove('visible');
  }
}

toggleArchiveBtn.onclick = () => {
  archiveContainer.classList.toggle('visible');
};

window.addEventListener('DOMContentLoaded', loadTasks);
</script>

</body>
</html>
